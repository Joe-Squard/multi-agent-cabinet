# /env-secrets — 環境変数・シークレットの安全な取り扱い

プロジェクトのシークレット管理を支援します。

## 使い方

```
/env-secrets scan [path]     # シークレットのスキャン
/env-secrets setup <project> # .env テンプレート生成
/env-secrets rotate          # ローテーション手順の案内
```

## scan: シークレットスキャン

1. 指定パス（デフォルト: カレントディレクトリ）をスキャン
2. 以下のパターンを検出:
   - ハードコードされたパスワード / API キー
   - `.env` ファイルのコミット
   - `credentials.json` 等のシークレットファイル
   - Base64 エンコードされたトークン
3. 検出結果を報告し、修正提案を行う

```bash
# スキャン対象パターン
grep -rn --include='*.{ts,js,py,yaml,yml,json,sh}' \
  -E '(password|secret|api_key|token|credential|private_key)\s*[:=]' \
  <path>
```

## setup: .env テンプレート生成

1. プロジェクトのコードから環境変数の使用箇所を検出
2. `.env.example` テンプレートを生成
3. `.gitignore` に `.env` が含まれているか確認

## rotate: ローテーション手順

1. 現在使用されているシークレットの一覧を表示
2. 各シークレットのローテーション手順を案内
3. 新しい値の設定方法を説明

## 4軸セキュリティバランス

以下の4軸でトレードオフを評価:
1. **セキュリティ**: どの程度安全か
2. **開発速度**: 開発効率への影響
3. **運用負荷**: 管理コスト
4. **ユーザー体験**: ユーザーへの影響
